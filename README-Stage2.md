# èŠå¤©ç³»ç»Ÿç¬¬äºŒé˜¶æ®µ - å®Œæ•´çš„ MEAN Stack å®ç°

## ğŸ‰ é¡¹ç›®æ¦‚è¿°

è¿™æ˜¯ä¸€ä¸ªåŸºäº MEAN å †æ ˆï¼ˆMongoDBã€Expressã€Angularã€Node.jsï¼‰çš„**å®Œæ•´å®æ—¶èŠå¤©ç³»ç»Ÿ**ï¼Œæ”¯æŒæ–‡æœ¬èŠå¤©ã€å›¾ç‰‡åˆ†äº«ã€æ–‡ä»¶ä¸Šä¼ å’Œè§†é¢‘é€šè¯åŠŸèƒ½ã€‚ç³»ç»Ÿå®ç°äº†ä¸‰çº§æƒé™ç®¡ç†å’Œå®Œæ•´çš„ä¼ä¸šçº§åŠŸèƒ½ã€‚

### ğŸ†• ç¬¬äºŒé˜¶æ®µæ–°åŠŸèƒ½

- âœ¨ **MongoDB æ•°æ®åº“**ï¼šå®Œå…¨æ›¿ä»£æ–‡ä»¶å­˜å‚¨ï¼Œæ”¯æŒæ•°æ®æŒä¹…åŒ–å’Œé«˜æ€§èƒ½æŸ¥è¯¢
- âœ¨ **å›¾ç‰‡å’Œæ–‡ä»¶ä¸Šä¼ **ï¼šæ”¯æŒå¤´åƒã€èŠå¤©å›¾ç‰‡ã€æ–‡æ¡£ç­‰å¤šç§æ–‡ä»¶ç±»å‹ä¸Šä¼ 
- âœ¨ **è§†é¢‘èŠå¤©åŠŸèƒ½**ï¼šåŸºäº PeerJS çš„ä¸€å¯¹ä¸€è§†é¢‘/éŸ³é¢‘é€šè¯
- âœ¨ **å¢å¼ºçš„å®æ—¶é€šä¿¡**ï¼šæ”¹è¿›çš„ Socket.io å®ç°ï¼Œæ”¯æŒç”¨æˆ·åœ¨çº¿çŠ¶æ€ã€è¾“å…¥æç¤ºç­‰
- âœ¨ **èŠå¤©å†å²è®°å½•**ï¼šå®Œæ•´çš„æ¶ˆæ¯å†å²è®°å½•å’Œåˆ†é¡µåŠ è½½
- âœ¨ **ç”¨æˆ·å¤´åƒç³»ç»Ÿ**ï¼šæ”¯æŒè‡ªå®šä¹‰å¤´åƒä¸Šä¼ å’Œæ˜¾ç¤º
- âœ¨ **Docker å®¹å™¨åŒ–éƒ¨ç½²**ï¼šç®€åŒ–çš„éƒ¨ç½²æµç¨‹å’Œç¯å¢ƒç®¡ç†

## ğŸ›  æŠ€æœ¯æ ˆï¼ˆç¬¬äºŒé˜¶æ®µï¼‰

### å‰ç«¯ (Angular)
- **Angular 17**: å‰ç«¯æ¡†æ¶
- **TypeScript**: å¼€å‘è¯­è¨€
- **RxJS**: å“åº”å¼ç¼–ç¨‹
- **Socket.io-client**: WebSocket å®¢æˆ·ç«¯é€šä¿¡
- **PeerJS**: è§†é¢‘é€šè¯å®¢æˆ·ç«¯
- **Angular CDK**: UIç»„ä»¶å¼€å‘å·¥å…·åŒ…

### åç«¯ (Node.js)
- **Node.js**: è¿è¡Œæ—¶ç¯å¢ƒ
- **Express.js**: Web æ¡†æ¶
- **Socket.io**: å®æ—¶åŒå‘é€šä¿¡
- **MongoDB & Mongoose**: æ•°æ®åº“å’Œ ODM
- **Multer**: æ–‡ä»¶ä¸Šä¼ å¤„ç†
- **PeerJS Server**: è§†é¢‘é€šè¯ä¿¡ä»¤æœåŠ¡å™¨
- **JWT**: ç”¨æˆ·è®¤è¯
- **bcryptjs**: å¯†ç åŠ å¯†

### æ•°æ®åº“ä¸éƒ¨ç½²
- **MongoDB 7.0**: ä¸»æ•°æ®åº“
- **Docker & Docker Compose**: å®¹å™¨åŒ–éƒ¨ç½²
- **Mongo Express**: æ•°æ®åº“ç®¡ç†ç•Œé¢

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Node.js 16+
- Docker & Docker Compose
- npm 8+
- Angular CLI 17+

### ä¸€é”®å¯åŠ¨ï¼ˆæ¨èï¼‰

1. **å…‹éš†é¡¹ç›®å¹¶è¿›å…¥ç›®å½•**
```bash
git clone <your-repo-url>
cd Angular
```

2. **ä½¿ç”¨å¯åŠ¨è„šæœ¬**
```bash
# Linux/macOS
chmod +x start.sh
./start.sh

# Windows (åœ¨ Git Bash æˆ– WSL ä¸­æ‰§è¡Œ)
bash start.sh
```

3. **æ‰‹åŠ¨å¯åŠ¨æœåŠ¡**
```bash
# å¯åŠ¨æœåŠ¡å™¨ï¼ˆæ–°ç»ˆç«¯çª—å£ï¼‰
cd server
npm run dev

# å¯åŠ¨å®¢æˆ·ç«¯ï¼ˆæ–°ç»ˆç«¯çª—å£ï¼‰
cd client
npm start
```

### æ‰‹åŠ¨éƒ¨ç½²æ­¥éª¤

1. **å¯åŠ¨ MongoDB æ•°æ®åº“**
```bash
docker-compose up -d
```

2. **å®‰è£…ä¾èµ–**
```bash
# æœåŠ¡å™¨ç«¯
cd server
npm install

# å®¢æˆ·ç«¯
cd ../client
npm install
```

3. **å¯åŠ¨åº”ç”¨**
```bash
# æœåŠ¡å™¨ï¼ˆç«¯å£ 3000ï¼‰
cd server
npm run dev

# å®¢æˆ·ç«¯ï¼ˆç«¯å£ 4200ï¼‰
cd client
npm start
```

## ğŸŒ è®¿é—®åœ°å€

- **å®¢æˆ·ç«¯åº”ç”¨**: http://localhost:4200
- **æœåŠ¡å™¨ API**: http://localhost:3000
- **API å¥åº·æ£€æŸ¥**: http://localhost:3000/api/health
- **MongoDB ç®¡ç†ç•Œé¢**: http://localhost:8081
- **PeerJS æœåŠ¡å™¨**: ws://localhost:9000/peerjs

## ğŸ‘¤ é»˜è®¤è´¦æˆ·

- **è¶…çº§ç®¡ç†å‘˜**
  - ç”¨æˆ·åï¼š`super`
  - å¯†ç ï¼š`123456`
  - æƒé™ï¼šå®Œå…¨ç®¡ç†æƒé™

## ğŸ“Š æ•°æ®åº“æ¶æ„ï¼ˆMongoDBï¼‰

### æ ¸å¿ƒé›†åˆ

#### Users é›†åˆ
```javascript
{
  _id: ObjectId,
  username: String (unique),
  email: String (unique),
  password: String (hashed),
  roles: [String], // ['user', 'group-admin', 'super-admin']
  avatar: String, // å¤´åƒæ–‡ä»¶è·¯å¾„
  isOnline: Boolean,
  lastSeen: Date,
  groups: [ObjectId], // æ‰€å±ç¾¤ç»„å¼•ç”¨
  createdAt: Date,
  updatedAt: Date
}
```

#### Groups é›†åˆ
```javascript
{
  _id: ObjectId,
  name: String,
  description: String,
  adminIds: [ObjectId], // ç®¡ç†å‘˜ç”¨æˆ·å¼•ç”¨
  memberIds: [ObjectId], // æˆå‘˜ç”¨æˆ·å¼•ç”¨
  createdBy: ObjectId, // åˆ›å»ºè€…å¼•ç”¨
  isPrivate: Boolean,
  maxMembers: Number,
  createdAt: Date,
  updatedAt: Date
}
```

#### Channels é›†åˆ
```javascript
{
  _id: ObjectId,
  name: String,
  description: String,
  groupId: ObjectId, // æ‰€å±ç¾¤ç»„å¼•ç”¨
  memberIds: [ObjectId], // é¢‘é“æˆå‘˜å¼•ç”¨
  isPrivate: Boolean,
  createdBy: ObjectId,
  lastActivity: Date,
  createdAt: Date,
  updatedAt: Date
}
```

#### Messages é›†åˆ
```javascript
{
  _id: ObjectId,
  content: String, // æ–‡æœ¬å†…å®¹ï¼ˆæ–‡æœ¬æ¶ˆæ¯å¿…éœ€ï¼‰
  senderId: ObjectId, // å‘é€è€…å¼•ç”¨
  senderUsername: String,
  channelId: ObjectId, // é¢‘é“å¼•ç”¨
  type: String, // 'text' | 'image' | 'file' | 'video'
  fileUrl: String, // æ–‡ä»¶URLï¼ˆæ–‡ä»¶æ¶ˆæ¯ä½¿ç”¨ï¼‰
  fileName: String, // åŸå§‹æ–‡ä»¶å
  fileSize: Number, // æ–‡ä»¶å¤§å°
  mimeType: String, // MIMEç±»å‹
  isEdited: Boolean,
  editedAt: Date,
  replyTo: ObjectId, // å›å¤æ¶ˆæ¯å¼•ç”¨
  reactions: [{ // æ¶ˆæ¯ååº”
    userId: ObjectId,
    emoji: String,
    timestamp: Date
  }],
  createdAt: Date,
  updatedAt: Date
}
```

## ğŸ”§ API æ¥å£æ–‡æ¡£

### è®¤è¯æ¥å£

| æ–¹æ³• | è·¯å¾„ | æè¿° | æƒé™ |
|------|------|------|------|
| POST | `/api/auth/login` | ç”¨æˆ·ç™»å½• | å…¬å¼€ |
| POST | `/api/auth/register` | ç”¨æˆ·æ³¨å†Œ | å…¬å¼€ |
| POST | `/api/auth/logout` | ç”¨æˆ·ç™»å‡º | è®¤è¯ç”¨æˆ· |
| GET | `/api/auth/users` | è·å–æ‰€æœ‰ç”¨æˆ· | è®¤è¯ç”¨æˆ· |
| PUT | `/api/auth/users/:id/promote` | æå‡ç”¨æˆ·æƒé™ | è¶…çº§ç®¡ç†å‘˜ |
| DELETE | `/api/auth/users/:id` | åˆ é™¤ç”¨æˆ· | è¶…çº§ç®¡ç†å‘˜ |
| PUT | `/api/auth/profile` | æ›´æ–°ä¸ªäººèµ„æ–™ | è®¤è¯ç”¨æˆ· |
| GET | `/api/auth/online-users` | è·å–åœ¨çº¿ç”¨æˆ· | è®¤è¯ç”¨æˆ· |

### ç¾¤ç»„æ¥å£

| æ–¹æ³• | è·¯å¾„ | æè¿° | æƒé™ |
|------|------|------|------|
| GET | `/api/groups` | è·å–ç”¨æˆ·ç¾¤ç»„ | è®¤è¯ç”¨æˆ· |
| GET | `/api/groups/all` | è·å–æ‰€æœ‰ç¾¤ç»„ | è¶…çº§ç®¡ç†å‘˜ |
| POST | `/api/groups` | åˆ›å»ºç¾¤ç»„ | ç¾¤ç»„ç®¡ç†å‘˜+ |
| GET | `/api/groups/:id` | è·å–ç¾¤ç»„è¯¦æƒ… | ç¾¤ç»„æˆå‘˜ |
| PUT | `/api/groups/:id` | æ›´æ–°ç¾¤ç»„ä¿¡æ¯ | ç¾¤ç»„ç®¡ç†å‘˜ |
| POST | `/api/groups/:id/channels` | åˆ›å»ºé¢‘é“ | ç¾¤ç»„ç®¡ç†å‘˜ |
| GET | `/api/groups/:id/channels` | è·å–é¢‘é“åˆ—è¡¨ | ç¾¤ç»„æˆå‘˜ |
| POST | `/api/groups/:id/members` | æ·»åŠ æˆå‘˜ | ç¾¤ç»„ç®¡ç†å‘˜ |
| DELETE | `/api/groups/:id/members/:userId` | ç§»é™¤æˆå‘˜ | ç¾¤ç»„ç®¡ç†å‘˜ |

### æ¶ˆæ¯æ¥å£

| æ–¹æ³• | è·¯å¾„ | æè¿° | æƒé™ |
|------|------|------|------|
| GET | `/api/groups/:groupId/channels/:channelId/messages` | è·å–æ¶ˆæ¯å†å² | é¢‘é“æˆå‘˜ |
| POST | `/api/groups/:groupId/channels/:channelId/messages` | å‘é€æ¶ˆæ¯ | é¢‘é“æˆå‘˜ |
| PUT | `/api/groups/:groupId/channels/:channelId/messages/:messageId` | ç¼–è¾‘æ¶ˆæ¯ | æ¶ˆæ¯ä½œè€… |
| DELETE | `/api/groups/:groupId/channels/:channelId/messages/:messageId` | åˆ é™¤æ¶ˆæ¯ | æ¶ˆæ¯ä½œè€… |

### æ–‡ä»¶ä¸Šä¼ æ¥å£

| æ–¹æ³• | è·¯å¾„ | æè¿° | æƒé™ |
|------|------|------|------|
| POST | `/api/upload/avatar` | ä¸Šä¼ å¤´åƒ | è®¤è¯ç”¨æˆ· |
| POST | `/api/upload/image` | ä¸Šä¼ èŠå¤©å›¾ç‰‡ | è®¤è¯ç”¨æˆ· |
| POST | `/api/upload/file` | ä¸Šä¼ æ–‡ä»¶ | è®¤è¯ç”¨æˆ· |
| POST | `/api/upload/files` | æ‰¹é‡ä¸Šä¼ æ–‡ä»¶ | è®¤è¯ç”¨æˆ· |
| DELETE | `/api/upload/file/:filename` | åˆ é™¤æ–‡ä»¶ | è®¤è¯ç”¨æˆ· |
| GET | `/api/upload/file/:filename` | è·å–æ–‡ä»¶ä¿¡æ¯ | è®¤è¯ç”¨æˆ· |

## ğŸ”„ Socket.io äº‹ä»¶

### å®¢æˆ·ç«¯å‘é€äº‹ä»¶

| äº‹ä»¶å | æ•°æ® | æè¿° |
|--------|------|------|
| `user-join` | `{id, username, avatar}` | ç”¨æˆ·åŠ å…¥ç³»ç»Ÿ |
| `join-channel` | `{channelId, user}` | åŠ å…¥é¢‘é“ |
| `leave-channel` | `{channelId, user}` | ç¦»å¼€é¢‘é“ |
| `send-message` | `{channelId, message, user, type, ...}` | å‘é€æ¶ˆæ¯ |
| `typing-start` | `{channelId, user}` | å¼€å§‹è¾“å…¥ |
| `typing-stop` | `{channelId, user}` | åœæ­¢è¾“å…¥ |

### æœåŠ¡ç«¯å‘é€äº‹ä»¶

| äº‹ä»¶å | æ•°æ® | æè¿° |
|--------|------|------|
| `user-online` | `{userId, username}` | ç”¨æˆ·ä¸Šçº¿ |
| `user-offline` | `{userId, username}` | ç”¨æˆ·ç¦»çº¿ |
| `user-joined-channel` | `{userId, username, message}` | ç”¨æˆ·åŠ å…¥é¢‘é“ |
| `user-left-channel` | `{userId, username, message}` | ç”¨æˆ·ç¦»å¼€é¢‘é“ |
| `receive-message` | `{id, content, sender, ...}` | æ¥æ”¶æ¶ˆæ¯ |
| `channel-users` | `{channelId, users}` | é¢‘é“åœ¨çº¿ç”¨æˆ· |
| `typing-start` | `{userId, username}` | ç”¨æˆ·å¼€å§‹è¾“å…¥ |
| `typing-stop` | `{userId, username}` | ç”¨æˆ·åœæ­¢è¾“å…¥ |

### è§†é¢‘é€šè¯ä¿¡ä»¤äº‹ä»¶

| äº‹ä»¶å | æ•°æ® | æè¿° |
|--------|------|------|
| `video-call-offer` | `{targetUserId, offer, callerId}` | å‘èµ·è§†é¢‘é€šè¯ |
| `video-call-answer` | `{callerSocketId, answer}` | æ¥å—è§†é¢‘é€šè¯ |
| `video-call-ice-candidate` | `{targetSocketId, candidate}` | ICE å€™é€‰äº¤æ¢ |
| `video-call-end` | `{targetSocketId}` | ç»“æŸè§†é¢‘é€šè¯ |

## ğŸ“ é¡¹ç›®ç»“æ„ï¼ˆç¬¬äºŒé˜¶æ®µï¼‰

```
/mnt/d/Angular/
â”œâ”€â”€ ğŸ“ client/                     # Angular å‰ç«¯åº”ç”¨
â”‚   â”œâ”€â”€ ğŸ“ src/app/
â”‚   â”‚   â”œâ”€â”€ ğŸ“ components/
â”‚   â”‚   â”‚   â”œâ”€â”€ login/             # ç™»å½•ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ dashboard/         # ä»ªè¡¨æ¿ç»„ä»¶
â”‚   â”‚   â”‚   â””â”€â”€ chat/              # èŠå¤©ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ ğŸ“ services/
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.service.ts    # è®¤è¯æœåŠ¡
â”‚   â”‚   â”‚   â”œâ”€â”€ group.service.ts   # ç¾¤ç»„æœåŠ¡
â”‚   â”‚   â”‚   â”œâ”€â”€ upload.service.ts  # æ–‡ä»¶ä¸Šä¼ æœåŠ¡
â”‚   â”‚   â”‚   â””â”€â”€ video-call.service.ts # è§†é¢‘é€šè¯æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ ğŸ“ models/             # æ•°æ®æ¨¡å‹
â”‚   â”‚   â””â”€â”€ ğŸ“ guards/             # è·¯ç”±å®ˆå«
â”‚   â””â”€â”€ package.json               # å‰ç«¯ä¾èµ–
â”œâ”€â”€ ğŸ“ server/                     # Node.js åç«¯åº”ç”¨
â”‚   â”œâ”€â”€ ğŸ“ config/
â”‚   â”‚   â””â”€â”€ database.js            # MongoDB è¿æ¥é…ç½®
â”‚   â”œâ”€â”€ ğŸ“ models/
â”‚   â”‚   â”œâ”€â”€ ğŸ“ mongodb/            # Mongoose æ¨¡å‹
â”‚   â”‚   â”‚   â”œâ”€â”€ User.js
â”‚   â”‚   â”‚   â”œâ”€â”€ Group.js
â”‚   â”‚   â”‚   â”œâ”€â”€ Channel.js
â”‚   â”‚   â”‚   â””â”€â”€ Message.js
â”‚   â”‚   â””â”€â”€ mongoDataStore.js      # æ•°æ®è®¿é—®å±‚
â”‚   â”œâ”€â”€ ğŸ“ routes/
â”‚   â”‚   â”œâ”€â”€ auth2.js               # è®¤è¯è·¯ç”±ï¼ˆMongoDBç‰ˆæœ¬ï¼‰
â”‚   â”‚   â”œâ”€â”€ groups2.js             # ç¾¤ç»„è·¯ç”±ï¼ˆMongoDBç‰ˆæœ¬ï¼‰
â”‚   â”‚   â””â”€â”€ upload.js              # æ–‡ä»¶ä¸Šä¼ è·¯ç”±
â”‚   â”œâ”€â”€ ğŸ“ middleware/
â”‚   â”‚   â””â”€â”€ auth.js                # JWT è®¤è¯ä¸­é—´ä»¶
â”‚   â”œâ”€â”€ ğŸ“ uploads/                # æ–‡ä»¶ä¸Šä¼ ç›®å½•
â”‚   â”‚   â”œâ”€â”€ avatars/               # ç”¨æˆ·å¤´åƒ
â”‚   â”‚   â”œâ”€â”€ images/                # èŠå¤©å›¾ç‰‡
â”‚   â”‚   â””â”€â”€ files/                 # å…¶ä»–æ–‡ä»¶
â”‚   â”œâ”€â”€ server2.js                 # ä¸»æœåŠ¡å™¨ï¼ˆç¬¬äºŒé˜¶æ®µï¼‰
â”‚   â”œâ”€â”€ peerServer.js              # PeerJS è§†é¢‘æœåŠ¡å™¨
â”‚   â”œâ”€â”€ .env                       # ç¯å¢ƒå˜é‡é…ç½®
â”‚   â””â”€â”€ package.json               # åç«¯ä¾èµ–
â”œâ”€â”€ docker-compose.yml             # Docker ç¼–æ’é…ç½®
â”œâ”€â”€ init-mongo.js                  # MongoDB åˆå§‹åŒ–è„šæœ¬
â”œâ”€â”€ start.sh                       # å¯åŠ¨è„šæœ¬
â”œâ”€â”€ stop.sh                        # åœæ­¢è„šæœ¬
â””â”€â”€ README-Stage2.md               # ç¬¬äºŒé˜¶æ®µæ–‡æ¡£
```

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½ç‰¹æ€§

### âœ… å·²å®ç°åŠŸèƒ½ï¼ˆç¬¬äºŒé˜¶æ®µï¼‰

#### ç”¨æˆ·ç®¡ç†
- [x] JWT åŸºäºä»¤ç‰Œçš„è®¤è¯ç³»ç»Ÿ
- [x] ä¸‰çº§æƒé™ç®¡ç†ï¼ˆè¶…çº§ç®¡ç†å‘˜/ç¾¤ç»„ç®¡ç†å‘˜/æ™®é€šç”¨æˆ·ï¼‰
- [x] ç”¨æˆ·æ³¨å†Œå’Œç™»å½•
- [x] ç”¨æˆ·å¤´åƒä¸Šä¼ å’Œæ˜¾ç¤º
- [x] ç”¨æˆ·åœ¨çº¿çŠ¶æ€ç®¡ç†
- [x] ä¸ªäººèµ„æ–™ç¼–è¾‘

#### ç¾¤ç»„å’Œé¢‘é“ç®¡ç†
- [x] åˆ›å»ºå’Œç®¡ç†ç¾¤ç»„
- [x] ç¾¤ç»„å†…åˆ›å»ºå¤šä¸ªé¢‘é“
- [x] ç¾¤ç»„æˆå‘˜ç®¡ç†ï¼ˆæ·»åŠ /ç§»é™¤ï¼‰
- [x] æƒé™æ§åˆ¶å’Œè®¿é—®ç®¡ç†
- [x] ç¾¤ç»„ç®¡ç†å‘˜æƒé™åˆ†é…

#### å®æ—¶èŠå¤©
- [x] åŸºäº Socket.io çš„å®æ—¶æ¶ˆæ¯ä¼ é€’
- [x] æ”¯æŒæ–‡æœ¬ã€å›¾ç‰‡ã€æ–‡ä»¶ç­‰å¤šç§æ¶ˆæ¯ç±»å‹
- [x] æ¶ˆæ¯å†å²è®°å½•å’Œåˆ†é¡µåŠ è½½
- [x] ç”¨æˆ·è¾“å…¥çŠ¶æ€æç¤º
- [x] æ¶ˆæ¯ç¼–è¾‘å’Œåˆ é™¤
- [x] é¢‘é“åœ¨çº¿ç”¨æˆ·æ˜¾ç¤º

#### æ–‡ä»¶å’Œåª’ä½“
- [x] å›¾ç‰‡ä¸Šä¼ å’Œå³æ—¶æ˜¾ç¤º
- [x] æ–‡ä»¶ä¸Šä¼ å’Œåˆ†äº«ï¼ˆæ–‡æ¡£ã€å‹ç¼©åŒ…ç­‰ï¼‰
- [x] å¤´åƒç³»ç»Ÿ
- [x] æ–‡ä»¶å¤§å°å’Œç±»å‹é™åˆ¶
- [x] æ–‡ä»¶é¢„è§ˆå’Œä¸‹è½½

#### è§†é¢‘é€šè¯
- [x] åŸºäº PeerJS çš„ä¸€å¯¹ä¸€è§†é¢‘é€šè¯
- [x] éŸ³é¢‘é€šè¯æ”¯æŒ
- [x] é€šè¯çŠ¶æ€ç®¡ç†
- [x] æ‘„åƒå¤´å’Œéº¦å…‹é£æ§åˆ¶
- [x] é€šè¯è®°å½•å’ŒçŠ¶æ€æ˜¾ç¤º

#### æ•°æ®æŒä¹…åŒ–
- [x] MongoDB æ•°æ®åº“å®Œå…¨é›†æˆ
- [x] ç”¨æˆ·æ•°æ®æŒä¹…åŒ–å­˜å‚¨
- [x] èŠå¤©è®°å½•æ°¸ä¹…ä¿å­˜
- [x] æ–‡ä»¶å…ƒæ•°æ®ç®¡ç†
- [x] æ•°æ®ç´¢å¼•ä¼˜åŒ–

#### éƒ¨ç½²å’Œè¿ç»´
- [x] Docker å®¹å™¨åŒ–éƒ¨ç½²
- [x] Docker Compose ä¸€é”®éƒ¨ç½²
- [x] MongoDB Express ç®¡ç†ç•Œé¢
- [x] å¥åº·æ£€æŸ¥å’Œç›‘æ§æ¥å£
- [x] ç¯å¢ƒé…ç½®ç®¡ç†
- [x] è‡ªåŠ¨åŒ–å¯åŠ¨è„šæœ¬

## ğŸ”§ å¼€å‘å’Œè°ƒè¯•

### ç¯å¢ƒå˜é‡é…ç½®

åœ¨ `server/.env` æ–‡ä»¶ä¸­é…ç½®ï¼š

```env
# æœåŠ¡å™¨é…ç½®
NODE_ENV=development
PORT=3000
JWT_SECRET=your-super-secret-jwt-key

# MongoDB é…ç½®
MONGODB_URI=mongodb://admin:chatpassword@localhost:27017/chatdb?authSource=admin

# æ–‡ä»¶ä¸Šä¼ é…ç½®
UPLOAD_PATH=./uploads
MAX_FILE_SIZE=10485760

# CORS é…ç½®
CLIENT_URL=http://localhost:4200

# PeerJS é…ç½®
PEER_SERVER_PORT=9000
PEER_SERVER_PATH=/peerjs
```

### å¼€å‘æ¨¡å¼å¯åŠ¨

```bash
# å¯åŠ¨å®Œæ•´å¼€å‘ç¯å¢ƒï¼ˆæœåŠ¡å™¨ + PeerJSï¼‰
cd server
npm run dev:full

# åˆ†åˆ«å¯åŠ¨
npm run dev          # ä¸»æœåŠ¡å™¨
npm run start:peer   # PeerJS æœåŠ¡å™¨
```

### æ•°æ®åº“ç®¡ç†

- **MongoDB Express**: http://localhost:8081
  - ç”¨æˆ·åï¼šadmin
  - å¯†ç ï¼šchatpassword

- **ç›´æ¥è¿æ¥ MongoDB**:
```bash
docker exec -it chat_mongodb mongo -u admin -p chatpassword
```

### æ—¥å¿—å’Œè°ƒè¯•

```bash
# æŸ¥çœ‹æœåŠ¡å™¨æ—¥å¿—
docker-compose logs -f

# æŸ¥çœ‹ MongoDB æ—¥å¿—
docker-compose logs -f mongodb

# è¿›å…¥å®¹å™¨è°ƒè¯•
docker exec -it chat_mongodb bash
```

## ğŸš¦ æ€§èƒ½ä¼˜åŒ–

### å·²å®ç°çš„ä¼˜åŒ–

1. **æ•°æ®åº“ç´¢å¼•ä¼˜åŒ–**
   - ç”¨æˆ·åå’Œé‚®ç®±å”¯ä¸€ç´¢å¼•
   - é¢‘é“å’Œç¾¤ç»„å…³è”ç´¢å¼•
   - æ¶ˆæ¯æ—¶é—´æˆ³ç´¢å¼•

2. **Socket.io ä¼˜åŒ–**
   - æˆ¿é—´ç®¡ç†ä¼˜åŒ–
   - äº‹ä»¶ç›‘å¬å™¨ä¼˜åŒ–
   - è¿æ¥çŠ¶æ€ç®¡ç†

3. **æ–‡ä»¶ä¸Šä¼ ä¼˜åŒ–**
   - æ–‡ä»¶ç±»å‹å’Œå¤§å°é™åˆ¶
   - å¤šæ–‡ä»¶ä¸Šä¼ æ”¯æŒ
   - æ–‡ä»¶å­˜å‚¨è·¯å¾„ä¼˜åŒ–

4. **å‰ç«¯æ€§èƒ½ä¼˜åŒ–**
   - æ¶ˆæ¯åˆ†é¡µåŠ è½½
   - å›¾ç‰‡æ‡’åŠ è½½
   - ç»„ä»¶çŠ¶æ€ä¼˜åŒ–

## ğŸ”’ å®‰å…¨ç‰¹æ€§

### å·²å®æ–½çš„å®‰å…¨æªæ–½

1. **è®¤è¯å’Œæˆæƒ**
   - JWT ä»¤ç‰Œè®¤è¯
   - å¯†ç  bcrypt åŠ å¯†
   - ç»†ç²’åº¦æƒé™æ§åˆ¶

2. **æ–‡ä»¶ä¸Šä¼ å®‰å…¨**
   - æ–‡ä»¶ç±»å‹ç™½åå•
   - æ–‡ä»¶å¤§å°é™åˆ¶
   - è·¯å¾„éå†é˜²æŠ¤

3. **æ•°æ®éªŒè¯**
   - è¾“å…¥æ•°æ®éªŒè¯
   - SQL æ³¨å…¥é˜²æŠ¤ï¼ˆNoSQLï¼‰
   - XSS é˜²æŠ¤

4. **ç½‘ç»œå®‰å…¨**
   - CORS é…ç½®
   - HTTPS æ”¯æŒï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰
   - Socket.io å®‰å…¨é…ç½®

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜è§£å†³

#### æ•°æ®åº“è¿æ¥å¤±è´¥
```bash
# æ£€æŸ¥ Docker å®¹å™¨çŠ¶æ€
docker-compose ps

# é‡å¯ MongoDB
docker-compose restart mongodb

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs mongodb
```

#### æ–‡ä»¶ä¸Šä¼ å¤±è´¥
- æ£€æŸ¥ä¸Šä¼ ç›®å½•æƒé™
- ç¡®è®¤æ–‡ä»¶å¤§å°é™åˆ¶
- éªŒè¯æ–‡ä»¶ç±»å‹æ”¯æŒ

#### è§†é¢‘é€šè¯è¿æ¥å¤±è´¥
- ç¡®è®¤ PeerJS æœåŠ¡å™¨è¿è¡ŒçŠ¶æ€
- æ£€æŸ¥æµè§ˆå™¨åª’ä½“æƒé™
- éªŒè¯é˜²ç«å¢™è®¾ç½®

#### Socket.io è¿æ¥é—®é¢˜
- æ£€æŸ¥ CORS é…ç½®
- ç¡®è®¤ç«¯å£å ç”¨æƒ…å†µ
- æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯

## ğŸ“ˆ æœªæ¥æ‰©å±•è§„åˆ’

### ç¬¬ä¸‰é˜¶æ®µåŠŸèƒ½è§„åˆ’

- [ ] **ç¾¤ç»„è§†é¢‘ä¼šè®®**ï¼šå¤šäººè§†é¢‘é€šè¯æ”¯æŒ
- [ ] **æ¶ˆæ¯æœç´¢**ï¼šå…¨æ–‡æœç´¢å’Œé«˜çº§ç­›é€‰
- [ ] **é€šçŸ¥ç³»ç»Ÿ**ï¼šé‚®ä»¶å’Œæ¨é€é€šçŸ¥
- [ ] **æœºå™¨äººé›†æˆ**ï¼šèŠå¤©æœºå™¨äººå’Œè‡ªåŠ¨åŒ–
- [ ] **å¤šè¯­è¨€æ”¯æŒ**ï¼šå›½é™…åŒ–å’Œæœ¬åœ°åŒ–
- [ ] **ç§»åŠ¨ç«¯åº”ç”¨**ï¼šReact Native ç§»åŠ¨åº”ç”¨
- [ ] **é›†ç¾¤éƒ¨ç½²**ï¼šè´Ÿè½½å‡è¡¡å’Œé«˜å¯ç”¨æ€§
- [ ] **æ•°æ®åˆ†æ**ï¼šç”¨æˆ·è¡Œä¸ºåˆ†æå’ŒæŠ¥è¡¨

### æŠ€æœ¯å€ºåŠ¡å’Œæ”¹è¿›

- [ ] **å•å…ƒæµ‹è¯•**ï¼šå®Œæ•´çš„æµ‹è¯•è¦†ç›–
- [ ] **E2E æµ‹è¯•**ï¼šç«¯åˆ°ç«¯è‡ªåŠ¨åŒ–æµ‹è¯•
- [ ] **æ€§èƒ½ç›‘æ§**ï¼šAPM é›†æˆ
- [ ] **æ—¥å¿—èšåˆ**ï¼šé›†ä¸­æ—¥å¿—ç®¡ç†
- [ ] **ç¼“å­˜ä¼˜åŒ–**ï¼šRedis é›†æˆ
- [ ] **CDN é›†æˆ**ï¼šé™æ€èµ„æºåŠ é€Ÿ

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork æœ¬é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ï¼š`git checkout -b feature/AmazingFeature`
3. æäº¤å˜æ›´ï¼š`git commit -m 'Add some AmazingFeature'`
4. æ¨é€åˆ°åˆ†æ”¯ï¼š`git push origin feature/AmazingFeature`
5. åˆ›å»º Pull Request

### å¼€å‘è§„èŒƒ

- ä½¿ç”¨ TypeScript ä¸¥æ ¼æ¨¡å¼
- éµå¾ª Angular æœ€ä½³å®è·µ
- ç¼–å†™æœ‰æ„ä¹‰çš„æäº¤ä¿¡æ¯
- æ·»åŠ å¿…è¦çš„æ³¨é‡Šå’Œæ–‡æ¡£
- ç¡®ä¿ä»£ç é€šè¿‡ ESLint æ£€æŸ¥

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶

## ğŸ™ è‡´è°¢

- Angular å›¢é˜Ÿæä¾›çš„ä¼˜ç§€å‰ç«¯æ¡†æ¶
- MongoDB å›¢é˜Ÿçš„é«˜æ€§èƒ½æ•°æ®åº“
- Socket.io å›¢é˜Ÿçš„å®æ—¶é€šä¿¡è§£å†³æ–¹æ¡ˆ
- PeerJS å›¢é˜Ÿçš„è§†é¢‘é€šè¯æŠ€æœ¯
- Docker å›¢é˜Ÿçš„å®¹å™¨åŒ–æŠ€æœ¯
- å¼€æºç¤¾åŒºçš„å®è´µè´¡çŒ®

## ğŸ‘¨â€ğŸ’» ä½œè€…

- **yingzi** - *é¡¹ç›®å¼€å‘è€…* - [yingzi4f@hotmail.com](mailto:yingzi4f@hotmail.com)

---

**ğŸŠ èŠå¤©ç³»ç»Ÿç¬¬äºŒé˜¶æ®µå¼€å‘å®Œæˆï¼**

è¿™æ˜¯ä¸€ä¸ªåŠŸèƒ½å®Œæ•´ã€æ€§èƒ½ä¼˜ç§€ã€å®‰å…¨å¯é çš„ä¼ä¸šçº§èŠå¤©ç³»ç»Ÿã€‚é¡¹ç›®é‡‡ç”¨äº†ç°ä»£åŒ–çš„æŠ€æœ¯æ ˆï¼Œå®ç°äº†å®Œæ•´çš„ç”¨æˆ·ç®¡ç†ã€å®æ—¶èŠå¤©ã€æ–‡ä»¶åˆ†äº«ã€è§†é¢‘é€šè¯ç­‰åŠŸèƒ½ï¼Œæ”¯æŒ Docker éƒ¨ç½²ï¼Œå…·æœ‰è‰¯å¥½çš„æ‰©å±•æ€§å’Œç»´æŠ¤æ€§ã€‚

**ç«‹å³ä½“éªŒï¼š** è¿è¡Œ `./start.sh` å¼€å§‹æ‚¨çš„èŠå¤©ä¹‹æ—…ï¼